if test -d $BUILDPACK_PATH/dependencies
then
    echo 'Use locally cached dependencies where possible'

    function curl() {
        local write_file=''

        ## Split the arguments from curl command into an array
        IFS=' ' read -a curl_args <<< "$@"

        ## Iterate over each arg until we find one that starts with http
        local count=0
        for arg in "${curl_args[@]}"
        do
            ## Does the argument start with http?
            if [[ $arg == http* ]]
            then
                filename=$(sed 's/[:\/]/_/g' <<< ${arg})
            fi

            ## Does the argument have an output file?
            if [[ $arg == '-o' ]]
            then
                write_file=${curl_args[count+1]}
            fi

            # Increment counter
            let count+=1
        done

        if test -f $BUILDPACK_PATH/dependencies/$filename
        then
            ## Was a file to write to provided?
            if [[ -n "$write_file" ]]
            then
                ## Write to file
                cat $BUILDPACK_PATH/dependencies/$filename > $write_file
            else
                # Stream output
                cat $BUILDPACK_PATH/dependencies/$filename
            fi
        else
            ## Dependency does not exist
            echo "Expected dependency to exist but could not find it: ${1}"
            exit 1;
        fi
    }
fi