#!/usr/bin/env python
# -*- coding: utf-8 -*-

"""Usage:
  pip-clean <req-file>

Options:
  -h --help     Show this screen.
"""
from docopt import docopt

BAD_PACKAGES = ['appdirs', 'packaging', 'pyparsing', 'six', 'setuptools', 'distribute']

def main():
    args = docopt(__doc__, version='pip-grep')
    req_file = args['<req-file>']

    lines = []
    with open(req_file, 'r') as f:
        # Iterate over every line in the requirements file.
        for line in f:

            skip_line = False

            # Check for every known bad package.
            for package in BAD_PACKAGES:
                if line.startswith(package):
                    # If bad package detected, remove the line.
                    skip_line = True

            if not skip_line:
                lines.append(line)

    # Write the requirements file to disk.
    with open(req_file, 'w') as f:
        f.write(''.join(lines))


if __name__ == '__main__':
    main()
